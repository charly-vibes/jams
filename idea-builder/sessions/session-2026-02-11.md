# Session 2026-02-11 - Repository Structure Adaptation & Focused UX

## Part 1: Repository Structure Adaptation

Adapted the existing Architekt app (single monolithic HTML file) to match the jams repository conventions.

### What was done

- **Extracted CSS** from inline `<style>` block to `style.css`
- **Extracted JavaScript** from inline `<script>` block to `script.js`
- **Restructured `index.html`** to reference external CSS/JS files and include repo-standard elements (home-link, footer with GitHub source link)
- **Created `spec/functionality.md`** documenting the app's purpose, features, requirements, and behavior
- **Created `sessions/` directory** for session documentation
- **Removed** Claude conversation HTML file that was not part of the app
- **Registered** the app in the root `script.js` APPS array

### Implementation Decisions

- Added `.home-link` and `footer` styles with `position:fixed` and `z-index:50` since the app uses `position:absolute; inset:0` for view panels, which would otherwise cover these elements
- Kept the PWA inline setup (service worker, manifest) in script.js since it generates blobs dynamically
- Preserved all original functionality without modification; this was purely a structural refactor

## Part 2: Focused UX Redesign

The app was originally designed for mobile. On desktop, all tabs showed too much information simultaneously, creating cognitive overload. Researched focused writing UX patterns (iA Writer, Ulysses, Notion, progressive disclosure) and redesigned the interaction model.

### Key principle: "One thing at a time"

Every view was redesigned to minimize distractions and maximize focus on the current task.

### Changes by tab

- **Ideas**: When composing a new idea, the existing ideas list and search field dim to 15% opacity and become non-interactive (CSS `:has()` selector). Attention stays on the input.
- **Topoi**: Converted from independent accordions to an exclusive accordion — only one topos open at a time. Opening one closes all others. Closed sections dim to 30% opacity when one is active. Textarea auto-focuses on open. Increased textarea min-height (140px mobile, 180px desktop).
- **Estructura**: Complete redesign from "all slots visible" to a step-by-step wizard. Only one slot is shown at a time with a large textarea. Navigation via prev/next buttons and clickable dot indicators. Dots show filled state for slots with content.
- **Combinar**: History is now collapsed by default behind a "Historial (N)" toggle button. When editing a ring's input, other rings dim to 25% opacity with the active ring highlighted.

### Desktop layout

- Removed multi-column grid layouts (2-col, 3-col) that were trying to fill space
- Single centered column at 560px max-width with generous padding
- The solution to "too much space" is not spreading things out, but showing less at once

### Research references

- iA Writer: "Content is the interface", deliberate absence of settings
- Progressive disclosure (Nielsen): Show only what's needed at each interaction point
- Cognitive load theory: Reduce extraneous load (clutter) to maximize germane load (creative work)
- Sentence-level focus: Dim inactive content to create visual hierarchy

## Part 3: Visual Declutter & Tool Consolidation

Reviewed the app for visual clutter and creative engagement. The main issue was too many simultaneous affordances — pills, chips, borders, always-on 4-tab nav — making it feel like a toolbox instead of a writing desk.

### Structural changes

- **4 tabs → 2 tabs**: Collapsed Topoi, Combinar, and Estructura into a single "Explorar" panel with collapsible accordion sections. Ideas remains the primary canvas. This matches user intent: capture first, then optionally expand/shape.
- **Export/Import → overflow menu**: Moved admin functions behind a `⋯` button that opens a modal. Removes visual competition with the creative prompt on the home screen.
- **Tag input → manual toggle**: Tags no longer auto-expand on textarea focus. A `#` button toggles the tag row explicitly, keeping the composer clean by default.

### Visual simplifications

- **Borders → shadows**: Replaced `border: 1px solid` on cards, topic rows, topos sections, combi rings, and struct slots with `box-shadow: 0 4px 16px rgba(0,0,0,0.04)`. Borders kept only for focus/selection states.
- **Tool nav pills → text tabs**: Bottom nav buttons converted from filled rounded pills to minimal text with `border-bottom: 2px solid var(--accent)` active state. Less visual weight.
- **Topos prompt chips → dashed links**: Prompts changed from rounded pill chips to plain text with `border-bottom: 1px dashed`. Reduces "chip overload" across the app.
- **Focus dimming softened**: Opacity values changed from 0.15/0.3 to 0.5. Less jarring, keeps context visible. Combi ring focus dimming removed entirely.

### Creative flow improvements

- Auto-refocus textarea after saving an idea (continuous capture without clicking)
- Refactored render functions into `renderXxxInto(container)` variants for reuse across standalone and explore panel contexts

### Design rationale

Creativity tools work better when the UI behaves like a writing desk: one main surface with tools available but not shouting. The consolidation into Ideas + Explorar gives focus without deleting any functionality.

## Notes

- The app uses Spanish language throughout (UI text, prompts, labels)
- The original app name is "Architekt" but lives in the `idea-builder` directory
- The app has a custom warm color scheme (not grayscale) with accent colors for different sections
- Focus dimming uses CSS `:has()` selector (supported in all modern browsers since Dec 2023)
