# Session 2026-02-08 — WiFi Helper

## Overview

Built the WiFi Helper app from scratch: a tool for testing WiFi signal quality at different locations and comparing results to find the best spot for an extender, paired with a placement best-practices checklist.

Enhanced in a second pass with auto-diagnostics, activity compatibility checking, expanded checklist, and reference material — all informed by a real network diagnostic report.

## Implementation Decisions

### Signal Quality Scoring

The scoring system uses a 0-100 scale with two modes:

- **Chromium browsers** (Chrome/Edge/Opera): Full scoring using the Network Information API (`navigator.connection`) — 40 points from reported downlink speed, 30 points from RTT, and 30 points from a timed speed test fetch.
- **Fallback** (Firefox/Safari): 100% of the score comes from the speed test fetch timing, since `navigator.connection` is unavailable.

This approach ensures the app works everywhere while leveraging richer data when available.

### Speed Test Method

Uses a fetch of lodash.min.js (~73KB gzipped) from cdnjs with a cache-busting query parameter and `cache: 'no-store'`. Measures wall-clock time with `performance.now()`. This gives a rough but useful relative comparison between locations — the absolute Mbps number is less important than the relative ranking.

### Auto-Diagnostics

After each signal test, the app automatically analyzes the results and flags issues:

- **Browser API availability** — informs the user if Network Information API is missing
- **Connection type detection** — flags slow-2g/2g/3g effective types
- **RTT analysis** — warns about high latency with thresholds for video calls (50ms) and gaming (100ms)
- **Downlink analysis** — flags bandwidth below 2 Mbps (critical) or 5 Mbps (warning)
- **Speed test assessment** — evaluates actual download performance
- **Double-hop detection** — heuristic: high RTT (>40ms) combined with low speed (<8 Mbps) suggests extender bottleneck
- **Overall verdict** — summarizes whether the spot is viable

Each diagnostic uses severity levels (ok/warn/critical) with distinct visual styling.

### Activity Compatibility

Each test result is automatically checked against 8 common activities (web browsing, video calls, gaming, streaming, etc.) with specific requirements for speed, latency, and overall score. Results show OK/Maybe/No for each activity, answering "is this spot good enough for what I need?"

### Expanded Checklist

Grew from 15 to 25 items across 4 categories (was 3). New items drawn from a real network diagnostic report:

- **Physical Placement**: Added signal strength verification target (-50 to -60 dBm) and "test 3+ spots" reminder
- **Interference Avoidance**: Added same-channel interference check (router and extender on different channels)
- **Configuration**: Added PMF/802.11w, WPS disable, router admin password, WPA2-AES specificity
- **Advanced / Upgrades** (new category): Ethernet backhaul with AP mode, mesh upgrade, DNS-over-TLS, device firewall

### Reference Section

Added to the Placement Guide tab with content from the network diagnostic report:

- **Signal Strength Table**: dBm ranges mapped to quality levels and practical impact
- **Activity Requirements Table**: Min speed, max latency, max packet loss per activity
- **Target Metrics Table**: What to aim for vs. what's poor when placing an extender
- **Double-Hop Problem**: Diagram and explanation of why extenders can make things worse
- **Same-Channel Interference**: 2.4 GHz channel diagram showing non-overlapping options (1, 6, 11)

### Checklist Persistence

Each checklist item has a stable string ID (e.g., `'microwave'`, `'firmware'`). The entire checked/unchecked state is stored as a flat object in localStorage, making it easy to add new items in the future without losing existing state.

### Best Spot Banner

Only shown when there are 2+ measurements, since "best" is meaningless with a single data point. The results table is sorted by score descending, with the top entry highlighted.

## Architecture

- **Tabs**: Simple CSS class toggle, no routing needed
- **State**: All state in localStorage, rendered on page load
- **XSS prevention**: Location names escaped via `textContent` → `innerHTML` pattern
- **Mobile-first**: 44px minimum touch targets, stacked controls on small screens, horizontal scroll on the results table
- **Diagnostics**: Run automatically after each test, no user action needed
- **Reference**: Rendered from JS data arrays, keeping content maintainable

## Browser API Notes

- `navigator.connection` is part of the Network Information API, only available in Chromium
- Properties used: `downlink` (estimated Mbps), `rtt` (estimated round-trip time in ms), `effectiveType` (string like "4g")
- The API reports estimates, not real-time measurements — it's a useful supplement to the speed test but not a replacement
